there should be trigger pules on GPIO4 synchronized with the ZCD signal


but its either on, or off or generating a weird square wave signal

alright and do note that since there are 2 trigger pulses for each zcd signal, one to turn on the triac for the first half of the sinewave and one for the second half

the zcd only generates one signal per cycle


so for X = 100% power, it would be High all the time, and for X = 50% power it will turn on at 5ms and then again at 15ms

but this is for freq = 50hz, T which is 20ms here would have to be the inverse of the frequency  calculated from the ZCD signal in the first placce

just maybe one small tweak, in #2, and #4, just decrease the end values by 0.5ms, just to be on the safe side in terms of switching

#1 - Signal = low for t = 0ms to t = 10*(100 - X)/100
#2 - Signal = High for t = 10*(100 - X)/100 to t = 9.5ms

#3 - Signal = low for t = 10ms to t = 10ms + 10*(100 - X)/100
#4 - Signal = High for t = 10 + 10*(100 - X)/100 to t = 19.5ms

at exact half values the signal might accidentally end up switching the triac for the second half of the sinewave
 
